<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <title>分页条</title>
    <link href="pageNav.css" rel="stylesheet">
</head>
<body>
<!-- 分页条 -->
<nav id="pageNav">
    <label class="paTxt" for="paSize" id="paTex1">
        <small>页面大小</small>
        <select id="paSize" onclick="paSizeChange()">
            <option selected value="7">7</option>
            <option value="10">10</option>
            <option value="13">13</option>
        </select>
    </label>
    <ul>
        <li>
            <span class="pa-btn" id="addPa" onclick="addPaNum(true)">&lt;</span>
        </li>
        <li id="pageStrip">
        </li>
        <li>
            <span class="pa-btn" id="reducePa" onclick="addPaNum(false)">&gt;</span>
        </li>
    </ul>
    <small class="paTxt">共<span id="dataNum">11</span>条数据</small>
</nav>
</body>
<script>
    window.onload = () => {
        firstLoadPa(29)
    }
    const paSize = document.getElementById("paSize") // 调整大小的选择框
    const pageStrip = document.getElementById("pageStrip") // 分页条(存储页码)
    let nowPage = 0; // 当前页码
    /**
     * 初始化页面
     * @param dataNum 数据长度
     */
    const firstLoadPa = (dataNum) => {
        document.getElementById("dataNum").innerText = dataNum;
        const pageSize = paSize.value;
        const pageNum = Math.ceil(dataNum / pageSize); // 向上取整
        for (let i = 0; i < pageNum; i++) {
            pageStrip.innerHTML += `<span onclick="cutPage(${i})">${i + 1}</span>`
        }
        // 选中第一个子元素
        nowPage = 0
        const paOneList = pageStrip.getElementsByTagName("span");
        paOneList[0].classList.add("active")
    }

    /**
     * 点击页码操作
     * @param paNum 当前页码的索引
     */
    const cutPage = (paNum) => {
        const paOneList = pageStrip.getElementsByTagName("span");
        paOneList[nowPage].classList.remove("active")
        paOneList[paNum].classList.add("active")
        nowPage = paNum
    }

    /**
     * 向前后翻页
     * @param isLeft
     */
    const addPaNum = (isLeft) => {
        if (isLeft) {
            if (nowPage === 0) return;
            cutPage(nowPage - 1)
        } else {
            if (nowPage === pageStrip.getElementsByTagName("span").length - 1) return;
            cutPage(nowPage + 1)
        }
    }

    /**
     * 分页大小变化
     */
    const paSizeChange = () => {
        pageStrip.innerHTML = ''
        firstLoadPa(29)
    }
</script>
</html>
